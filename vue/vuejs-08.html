<!-- 
一、自定义指令
    1.注册
     1）全局注册
     语法：Vue.directive("global-directive",definition对象);
     在模板中使用：<div v-global-directive></div>
     2）局部注册
     var 变量名 = Vue.extend({
        directives:{
            'localDirective':{}
        }
     })
     在模板中使用：<div v-local-directive></div>
    2.指令的定义对象
    在注册指令的同时，可以传入definition对象，对指令赋予一些特殊的功能。这个定义对象主要包含以下几个钩子函数：
    -bind :在指令第一次绑定到元素上时调用，只调用一次。
    -inserted:被绑定元素插入到父节点时调用。
    -update:指令在bind之后以初始值为参数进行第一次调用，之后每次当绑定值发生变化时调用，update接收到的参数有value和oldValue
    -unbind:指令从元素上解绑时调用，只调用一次。
    3.钩子函数参数
    -el:指令所绑定的元素，可以直接用来操作DOM。
    -binding：是一个对象，包含以下参数：
        -name: 指令名，不包括v-前缀
        -value:指令绑定的值
        -oldValue:指令绑定的前一个值，仅在update中作用。
        -expression:指令绑定值的字符串形式。
    4.函数简写
        大多数情况下，我们只想在bind和update钩子上做重复动作，并且不关心其它钩子函数。就可以写为：
        Vue.directive("指令名",function(el,binding){
            操作
        })
    5.对象字面量
        如果指令需要多个值，可以传入一个JavaScript对象字面量。指令函数能够接受所有合法类型的JavaScript表达式。
 -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src = "vue.js"></script>
</head>
<body>
    <div id="app">
        <div v-my-directive= "msg1" v-if = "isBind">123</div>
        <input type="text" v-model = "msg1">
        <input type="button" value = "按钮" @click = "changeStatus">
        <my-tag></my-tag>
        <!-- <div v-my-dir = "red">这是自定义指令的简写</div> -->
        <div v-my-dir = "{color:'red',text:'你好'}">对象字面量</div>
    </div>
    <script>
        Vue.directive("my-dir",function(el,binding){
            console.log(binding.value);
            el.style.color = binding.value.color;
        });
        Vue.directive("my-directive",{
            bind:function(el,binding){
                console.log("bind");
                console.log(binding);
                console.log(binding.name);
                console.log(binding.value);
                console.log(binding.expression);
            },
            update:function(el,binding){
                console.log(el);
                el.style.color = "red";
                // console.log(binding);
                console.log(binding.value);
                console.log(binding.oldValue);
                console.log("update");
            }
        });
        // var dir = Vue.extend({
        //     template:"<p v-local-directive ></p>",
        //     directives:{
        //         'localDirective':{
        //             inserted:function(){
        //                 console.log("inserted");
        //             }
        //         }
        //     }
        // })
        // Vue.component("my-tag",dir);
        // var vm = new Vue({
        //     el:"#app",
        //     data:{
        //         msg1:"222",
        //         isBind:true,
        //         red:"red"
        //     },
        //     methods:{
        //         changeStatus:function(){
        //             this.isBind = false;
        //         }
        //     }
        // })
    </script>
</body>
</html>